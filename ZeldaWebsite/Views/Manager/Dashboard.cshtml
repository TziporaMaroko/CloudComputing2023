@model List<ZeldaWebsite.Models.Order>
@{
	ViewData["Title"] = "Dashboard";
	Layout = "~/Views/Shared/ManagerLayout.cshtml";
}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js"></script>

<!-- ============================================================== -->
<!-- Yearly Sales -->
<!-- ============================================================== -->
<div class="row">
	<div class="col-lg-8 mb-10 ml-10">
		
		<div class="card oh">
			<div class="card-body">
				<h4 class="card-title">Graph Overview</h4>
				<div id="line-chart" style="height: 350px;"></div>

			</div>
			<div class="card-body bg-light">
				<div class="row text-center m-b-20">
					<div class="col-lg-4 col-md-4 m-t-20">
						<h2 class="m-b-0 font-light">@Model.Count</h2><span class="text-muted">Total orders</span>
						@{
							if (Model.Any())
							{
								double averageTotal = Model.Average(order => order.Total);
								<h2 class="m-b-0 font-light">@averageTotal.ToString("F2")$</h2>
								<span class="text-muted">Average order's total</span>
							}
							
						}
						<h2 class="m-b-0 font-light">@Model.Count</h2><span class="text-muted">Total orders</span>
					</div>
				</div>
			</div>
		</div>
	</div>
	<style>
		
.morris-hover.morris-default-style {
    border-radius: 10px;
    padding: 6px;
    color: #000;
    background: rgba(255,255,255,0.8);
    border: solid 2px rgba(230,230,230,0.8);
    font-family: sans-serif;
    font-size: 12px;
    text-align: center;
}
.morris-hover.morris-default-style {
    border-radius: 4px;
    padding: 10px 12px;
    color: #000;
    background: #63676b;
    border: none;
    color: #fff!important;
    box-shadow: none;
    font-size: 14px;
}
.morris-hover {
    position: absolute;
    z-index: 1000;
}
.morris-hover {
    position: absolute;
    z-index: 1;
}
	</style>
	<script>
		$(function () {
			"use strict";

			// Retrieve the monthly order data from the hidden div
			var monthlyOrdersData = @Html.Raw(ViewBag.MonthlyOrdersJson);

			var config = {
				data: monthlyOrdersData,
				xkey: 'period',
				ykeys: ['ordersCount', 'ordersTotal'],
				labels: ['Orders Count', 'Orders Total'],
				fillOpacity: 0.6,
				hideHover: 'auto',
				behaveLikeLine: true,
				resize: true,
				pointFillColors: ['#ffffff'],
				pointStrokeColors: ['#f62d51', '#7460ee', '#009efb'],
				lineColors: ['gray', 'red'],
				gridLineColor: ['#009efb', '#7460ee', '#009efb'],
				lineWidth: 1
			};


			config.element = 'line-chart';
			Morris.Line(config);
		});
	</script>



	<!-- ============================================================== -->
	<!-- News -->
	<!-- ============================================================== -->
	<div class="row">
		<!-- column -->
		<div class="col-12 ml-10 mb-10">
			<div class="card">
				<div class="card-body">
					<div class="d-flex">
						<div>
							<h4 class="card-title">Sales Overview</h4>
							<h5 class="card-subtitle">Check the monthly sales </h5>
						</div>
						<div class="ml-auto">
							<select class="custom-select b-0">
								<option>January</option>
								<option value="1">February</option>
								<option value="2" selected="">March</option>
								<option value="3">April</option>
							</select>
						</div>
					</div>
				</div>
				<div class="table-responsive">
					<table class="table table-hover">
						<thead>
							<tr>
								<th>ID</th>
								<th>First Name</th>
								<th>Last Name</th>
								<th>Date</th>
								<th>Total</th>
							</tr>
						</thead>
						<tbody>
							@foreach (var order in Model)
							{
								<tr>
									<td class="text-center">@order.Id</td>
									<td class="txt-oflo">@order.FirstName</td>
									<td class="txt-oflo">@order.LastName</td>
									<td class="txt-oflo">@order.Date.Day/@order.Date.Month/@order.Date.Year</td>
									<td><span class="text-success">@order.Total.ToString("F2")$</span></td>
								</tr>
							}
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
</div>